<!-- app/templates/goal_card.html -->
<div class="col-md-6 mb-4">
    <div class="card bg-secondary text-white border-warning shadow-lg h-100" data-goal-id="{{ goal.id }}">
        <div class="card-header bg-warning text-dark d-flex justify-content-between align-items-center">
            <h5 class="mb-0">{{ goal.title }}</h5>
            <span class="badge bg-dark">{{ goal.type }}</span>
        </div>
        <div class="card-body">
            <p><strong>Description:</strong> {{ goal.description }}</p>
            {% if goal.motivation %}
                <p><strong>Motivation:</strong> <em>{{ goal.motivation }}</em></p>
            {% endif %}

            <!-- Progress Bar -->
            <div class="progress mb-3" style="height: 25px;">
                <div class="progress-bar bg-warning text-dark fw-bold" role="progressbar"
                     style="width: {{ goal.progress() }}%" data-progress="{{ goal.progress() }}">
                    {{ goal.progress() }}%
                </div>
            </div>

            <!-- Steps -->
            <div class="steps-container">
                <h6>Nested Steps:</h6>
                <ul class="list-group list-group-flush">
                    {% for step in goal.steps %}
                        <li class="list-group-item bg-dark step-item" data-step-id="{{ step.id }}">
                            <div class="form-check">
                                <input class="form-check-input step-checkbox" type="checkbox" 
                                       {% if step.completed %}checked{% endif %}>
                                <label class="form-check-label {{#if step.completed}}text-decoration-line-through text-muted{{/if}}">
                                    {{ step.title }}
                                    {% if step.due_date %} <small>({{ step.due_date.strftime('%m/%d') }})</small> {% endif %}
                                </label>
                            </div>
                        </li>
                    {% else %}
                        <li class="text-muted">No steps yet. Add one!</li>
                    {% endfor %}
                </ul>
                <div class="input-group mt-2">
                    <input type="text" class="form-control form-control-sm new-step" placeholder="New step...">
                    <input type="date" class="form-control form-control-sm" style="width: 120px;">
                    <button class="btn btn-sm btn-outline-warning add-step">Add</button>
                </div>
            </div>
        </div>
    </div>
</div>